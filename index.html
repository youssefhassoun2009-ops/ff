<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>منصة تنظيم الحياة - LifeBoard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css" rel="stylesheet"/>
  <style>
    body {
      background-color: #f4f6f9;
      padding: 30px;
      transition: background-color 0.3s ease;
    }
    .dark-mode {
      background-color: #1e1e2f;
      color: #f1f1f1;
    }
    .dark-mode .form-control,
    .dark-mode .form-select,
    .dark-mode .table {
      background-color: #2c2c3e;
      color: #f1f1f1;
      border-color: #444;
    }
    .dark-mode .table th,
    .dark-mode .table td {
      color: #f1f1f1;
    }
    .section-title {
      margin-top: 40px;
      margin-bottom: 20px;
      border-bottom: 2px solid #ccc;
      padding-bottom: 10px;
    }
    .note-card {
      background-color: #fff;
      border-left: 5px solid #0d6efd;
      padding: 15px;
      margin-bottom: 10px;
      border-radius: 5px;
    }
    .dark-mode .note-card {
      background-color: #2c2c3e;
      border-left: 5px solid #0d6efd;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1 class="text-center mb-4">📋 منصة تنظيم الحياة – LifeBoard</h1>

    <!-- زر الوضع الليلي -->
    <div class="text-end mb-3">
      <button class="btn btn-dark" id="toggleMode">🌓 تبديل الوضع</button>
    </div>

    <!-- قسم المهام -->
    <h3 class="section-title">✅ إدارة المهام</h3>
    <form id="taskForm" class="row g-3">
      <div class="col-md-3">
        <input type="text" class="form-control" id="taskName" placeholder="اسم المهمة" required />
      </div>
      <div class="col-md-3">
        <input type="date" class="form-control" id="taskDate" required />
      </div>
      <div class="col-md-2">
        <input type="time" class="form-control" id="taskTime" required />
      </div>
      <div class="col-md-3">
        <input type="text" class="form-control" id="taskNote" placeholder="ملاحظات" />
      </div>
      <div class="col-md-1 d-grid">
        <button type="submit" class="btn btn-primary">أضف</button>
      </div>
    </form>

    <table class="table table-striped table-bordered mt-4" id="taskTable">
      <thead class="table-dark">
        <tr>
          <th>المهمة</th>
          <th>التاريخ</th>
          <th>الوقت</th>
          <th>ملاحظات</th>
          <th>إجراء</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <!-- قسم المفكرة -->
    <h3 class="section-title">📝 مفكرتك اليومية</h3>
    <div class="mb-3">
      <textarea class="form-control" id="dailyNote" rows="4" placeholder="اكتب ملاحظاتك هنا..."></textarea>
    </div>
    <button class="btn btn-success mb-4" onclick="saveNote()">💾 حفظ الملاحظة</button>
    <div id="savedNotes" class="mb-4"></div>

    <!-- قسم عداد الإنجاز -->
    <h3 class="section-title">📊 عداد الإنجاز</h3>
    <div class="progress mb-3">
      <div id="progressBar" class="progress-bar" role="progressbar" style="width: 0%">0%</div>
    </div>

    <!-- قسم التقويم -->
    <h3 class="section-title">📅 تقويم الأسبوع</h3>
    <div class="table-responsive">
      <table class="table table-bordered text-center">
        <thead class="table-light">
          <tr>
            <th>الأحد</th>
            <th>الاثنين</th>
            <th>الثلاثاء</th>
            <th>الأربعاء</th>
            <th>الخميس</th>
            <th>الجمعة</th>
            <th>السبت</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td id="sun"></td>
            <td id="mon"></td>
            <td id="tue"></td>
            <td id="wed"></td>
            <td id="thu"></td>
            <td id="fri"></td>
            <td id="sat"></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <script>
    const taskForm = document.getElementById("taskForm");
    const taskTable = document.querySelector("#taskTable tbody");
    const progressBar = document.getElementById("progressBar");
    const toggleModeBtn = document.getElementById("toggleMode");
    const savedNotes = document.getElementById("savedNotes");

    // الوضع الليلي
    toggleModeBtn.addEventListener("click", () => {
      document.body.classList.toggle("dark-mode");
    });

    // إضافة مهمة
    taskForm.addEventListener("submit", function (e) {
      e.preventDefault();
      const name = document.getElementById("taskName").value;
      const date = document.getElementById("taskDate").value;
      const time = document.getElementById("taskTime").value;
      const note = document.getElementById("taskNote").value;

      const row = taskTable.insertRow();
      row.insertCell(0).textContent = name;
      row.insertCell(1).textContent = date;
      row.insertCell(2).textContent = time;
      row.insertCell(3).textContent = note;

      const actionCell = row.insertCell(4);
      const deleteBtn = document.createElement("button");
      deleteBtn.textContent = "🗑️ حذف";
      deleteBtn.className = "btn btn-danger btn-sm";
      deleteBtn.onclick = function () {
        taskTable.deleteRow(row.rowIndex - 1);
        updateProgress();
      };
      actionCell.appendChild(deleteBtn);

      taskForm.reset();
      updateProgress();
      updateCalendar(name, date);
    });

    // تحديث عداد الإنجاز
    function updateProgress() {
      const total = taskTable.rows.length;
      const percent = total === 0 ? 0 : Math.min(100, total * 10);
      progressBar.style.width = percent + "%";
      progressBar.textContent = percent + "%";
    }

    // حفظ الملاحظات
    function saveNote() {
      const note = document.getElementById("dailyNote").value;
      if (note.trim() === "") return;
      const noteDiv = document.createElement("div");
      noteDiv.className = "note-card";
      noteDiv.textContent = note;
      savedNotes.appendChild(noteDiv);
      document.getElementById("dailyNote").value = "";
    }

    // تحديث التقويم
    function updateCalendar(task, dateStr) {
      const date = new Date(dateStr);
      const day = date.getDay(); // 0 = الأحد
      const days = ["sun", "mon", "tue", "wed", "thu", "fri", "sat"];
      const cell = document.getElementById(days[day]);
      const item = document.createElement("div");
      item.textContent = "• " + task;
      cell.appendChild(item);
    }
  </script>
</body>
</html>